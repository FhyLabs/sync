{"version":3,"file":"sync.js","sources":["../src/utils/helpers.js","../src/utils/fetchData.js","../src/utils/render.js","../src/core/PluginManager.js","../src/core/SyncElement.js","../src/core/SyncManager.js","../src/index.js"],"sourcesContent":["export const isFullUrl = (url) => /^https?:\\/\\//i.test(url);\r\nexport const resolveUrl = (base, endpoint) => {\r\n  try {\r\n    if (isFullUrl(endpoint)) return endpoint;\r\n    return new URL(endpoint, base).toString();\r\n  } catch (err) {\r\n    return endpoint;\r\n  }\r\n};\r\n","export async function fetchData(url, opts = {}) {\r\n  try {\r\n    const res = await fetch(url, { mode: \"cors\", ...opts });\r\n    if (!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText}`);\r\n    const ct = (res.headers.get(\"content-type\") || \"\").toLowerCase();\r\n    if (ct.includes(\"application/json\")) return await res.json();\r\n    return await res.text();\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n","export function renderData(el, data, renderFnName, { diff = false } = {}) {\r\n  if (renderFnName && typeof window[renderFnName] === \"function\") {\r\n    const html = window[renderFnName](data);\r\n    if (diff) {\r\n      if (el.__lastHTML !== html) {\r\n        el.innerHTML = html;\r\n        el.__lastHTML = html;\r\n      }\r\n    } else {\r\n      el.innerHTML = html;\r\n      el.__lastHTML = html;\r\n    }\r\n  } else {\r\n    if (typeof data === \"object\") {\r\n      const html = `<pre>${JSON.stringify(data, null, 2)}</pre>`;\r\n      if (diff) {\r\n        if (el.__lastHTML !== html) {\r\n          el.innerHTML = html;\r\n          el.__lastHTML = html;\r\n        }\r\n      } else {\r\n        el.innerHTML = html;\r\n        el.__lastHTML = html;\r\n      }\r\n    } else {\r\n      el.textContent = data;\r\n    }\r\n  }\r\n}\r\n","export class PluginManager {\r\n  constructor() {\r\n    this.plugins = [];\r\n    this.hooks = {};\r\n  }\r\n\r\n  use(plugin) {\r\n    if (!plugin) return;\r\n    this.plugins.push(plugin);\r\n    const knownHooks = [\"sync:onload\",\"sync:beforeUpdate\",\"sync:afterUpdate\",\"sync:error\",\"sync:connect\",\"sync:disconnect\"];\r\n    for (const h of knownHooks) {\r\n      if (typeof plugin[h] === \"function\") {\r\n        this.hooks[h] = this.hooks[h] || [];\r\n        this.hooks[h].push(plugin[h].bind(plugin));\r\n      }\r\n    }\r\n  }\r\n\r\n  on(hook, fn) {\r\n    this.hooks[hook] = this.hooks[hook] || [];\r\n    this.hooks[hook].push(fn);\r\n  }\r\n\r\n  trigger(hook, payload) {\r\n    (this.hooks[hook] || []).forEach(fn => {\r\n      try { fn(payload); } catch (err) { console.error(`[SyncLib Plugin Error][${hook}]`, err); }\r\n    });\r\n  }\r\n}\r\n\r\nexport const pluginManager = new PluginManager();\r\n","import { resolveUrl } from \"../utils/helpers.js\";\r\nimport { fetchData } from \"../utils/fetchData.js\";\r\nimport { renderData } from \"../utils/render.js\";\r\nimport { pluginManager } from \"./PluginManager.js\";\r\n\r\nexport class SyncElement {\r\n  constructor(el) {\r\n    this.el = el;\r\n    this.rawEndpoint = el.dataset.endpoint;\r\n    this.endpoint = resolveUrl(window.location.origin, this.rawEndpoint);\r\n    this.format = (el.dataset.format || \"auto\").toLowerCase();\r\n    this.renderFn = el.dataset.render || null;\r\n    this.interval = parseInt(el.dataset.interval || \"5000\", 10);\r\n    this.mode = (el.dataset.mode || \"auto\").toLowerCase();\r\n    this.diff = el.dataset.diff === \"true\";\r\n    this.cache = el.dataset.cache === \"true\";\r\n    this.started = false;\r\n    this.connection = null;\r\n    this.timer = null;\r\n\r\n    this.init();\r\n  }\r\n\r\n  async init() {\r\n    pluginManager.trigger(\"sync:onload\", { element: this.el, endpoint: this.endpoint });\r\n    this.start();\r\n  }\r\n\r\n  async start() {\r\n    if (this.started) return;\r\n    this.started = true;\r\n\r\n    if (this.mode === \"auto\") {\r\n      if (this.endpoint.startsWith(\"ws\")) this.mode = \"websocket\";\r\n      else if (this.endpoint.endsWith(\".json\")) this.mode = \"polling\";\r\n      else if (this.endpoint.includes(\"/stream\")) this.mode = \"sse\";\r\n      else this.mode = \"polling\";\r\n    }\r\n\r\n    pluginManager.trigger(\"sync:connect\", { element: this.el, mode: this.mode });\r\n\r\n    switch (this.mode) {\r\n      case \"polling\": this.startPolling(); break;\r\n      case \"sse\": this.startSSE(); break;\r\n      case \"websocket\": this.startWebSocket(); break;\r\n      case \"event\": this.startEvent(); break;\r\n      case \"local\": this.loadOnce(); break;\r\n      default: console.warn(\"Unknown sync mode:\", this.mode);\r\n    }\r\n  }\r\n\r\n  async startPolling() {\r\n    const fetchAndRender = async () => {\r\n      pluginManager.trigger(\"sync:beforeUpdate\", { element: this.el, endpoint: this.endpoint });\r\n      try {\r\n        const data = await fetchData(this.endpoint);\r\n        this._onData(data);\r\n      } catch (err) {\r\n        this._onError(err);\r\n      }\r\n    };\r\n    await fetchAndRender();\r\n    this.timer = setInterval(fetchAndRender, this.interval);\r\n  }\r\n\r\n  startSSE() {\r\n    try {\r\n      const evt = new EventSource(this.endpoint);\r\n      evt.onmessage = (e) => {\r\n        try {\r\n          const data = JSON.parse(e.data);\r\n          this._onData(data);\r\n        } catch {\r\n          this._onData(e.data);\r\n        }\r\n      };\r\n      evt.onerror = (err) => this._onError(err);\r\n      this.connection = evt;\r\n    } catch (err) {\r\n      this._onError(err);\r\n    }\r\n  }\r\n\r\n  startWebSocket() {\r\n    try {\r\n      const ws = new WebSocket(this.endpoint);\r\n      ws.onopen = () => pluginManager.trigger(\"sync:connect\", { element: this.el, mode: \"websocket\" });\r\n      ws.onmessage = (msg) => {\r\n        try {\r\n          const data = JSON.parse(msg.data);\r\n          this._onData(data);\r\n        } catch {\r\n          this._onData(msg.data);\r\n        }\r\n      };\r\n      ws.onerror = (err) => this._onError(err);\r\n      ws.onclose = () => pluginManager.trigger(\"sync:disconnect\", { element: this.el });\r\n      this.connection = ws;\r\n    } catch (err) {\r\n      this._onError(err);\r\n    }\r\n  }\r\n\r\n  startEvent() {\r\n    // manual trigger mode\r\n    this.el.addEventListener(\"sync:trigger\", async () => {\r\n      pluginManager.trigger(\"sync:beforeUpdate\", { element: this.el, endpoint: this.endpoint });\r\n      try {\r\n        const data = await fetchData(this.endpoint);\r\n        this._onData(data);\r\n      } catch (err) {\r\n        this._onError(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  async loadOnce() {\r\n    try {\r\n      const data = await fetchData(this.endpoint);\r\n      this._onData(data);\r\n    } catch (err) {\r\n      this._onError(err);\r\n    }\r\n  }\r\n\r\n  _onData(payload) {\r\n    try {\r\n      pluginManager.trigger(\"sync:beforeUpdate\", { element: this.el, data: payload });\r\n      renderData(this.el, payload, this.renderFn, { diff: this.diff });\r\n      pluginManager.trigger(\"sync:afterUpdate\", { element: this.el, data: payload });\r\n    } catch (err) {\r\n      this._onError(err);\r\n    }\r\n  }\r\n\r\n  _onError(err) {\r\n    pluginManager.trigger(\"sync:error\", { element: this.el, error: err });\r\n  }\r\n\r\n  stop() {\r\n    if (this.timer) clearInterval(this.timer);\r\n    if (this.connection) {\r\n      if (this.mode === \"sse\") this.connection.close();\r\n      if (this.mode === \"websocket\") this.connection.close();\r\n    }\r\n    this.started = false;\r\n    pluginManager.trigger(\"sync:disconnect\", { element: this.el, endpoint: this.endpoint });\r\n  }\r\n}\r\n","import { SyncElement } from \"./SyncElement.js\";\r\nimport { pluginManager } from \"./PluginManager.js\";\r\n\r\nexport class SyncManager {\r\n  constructor() {\r\n    this.instances = [];\r\n    this.selector = '[sync=\"true\"]';\r\n  }\r\n\r\n  start(selector = null) {\r\n    const sel = selector || this.selector;\r\n    document.querySelectorAll(sel).forEach(el => {\r\n      if (el.__syncInstance) return;\r\n      const inst = new SyncElement(el);\r\n      el.__syncInstance = inst;\r\n      this.instances.push(inst);\r\n    });\r\n    pluginManager.trigger(\"sync:manager:start\", { count: this.instances.length });\r\n    return this.instances;\r\n  }\r\n\r\n  stop() {\r\n    this.instances.forEach(i => i.stop());\r\n    this.instances = [];\r\n    pluginManager.trigger(\"sync:manager:stop\", {});\r\n  }\r\n}\r\n","import { SyncManager } from \"./core/SyncManager.js\";\r\nimport { pluginManager } from \"./core/PluginManager.js\";\r\n\r\n// Single global manager instance\r\nconst manager = new SyncManager();\r\n\r\nconst SyncLib = {\r\n  start: (selector) => manager.start(selector),\r\n  stop: () => manager.stop(),\r\n  on: (event, handler) => pluginManager.on(event, handler),\r\n  use: (plugin) => pluginManager.use(plugin),\r\n  _manager: manager,\r\n};\r\n\r\nwindow.SyncLib = SyncLib;\r\ndocument.addEventListener(\"DOMContentLoaded\", () => SyncLib.start());\r\nexport default SyncLib;\r\n"],"names":[],"mappings":"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"}